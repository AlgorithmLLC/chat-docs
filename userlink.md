### Работа со списком контактов

Данный документ описывает логику и сценарий работы по управлению списком контактов.

1. [Описание статусов пользователя](/userlink.md#Описание-статусов-пользователя)
2. [Поиск пользователя](/userlink.md#Поиск-пользователя)
3. [Изменение статуса авторизации](/userlink.md#Изменение-статуса-авторизации)
4. [Обработка изменений статуса имеющихся контактов](/userlink.md#Обработка-изменений-статуса-имеющихся-контактов)
5. [Запрет/разрешение управления списком контактов](/userlink.md#Запрет/разрешение-управления-списком-контактов)

#### Описание статусов пользователя
Каждый контакт, который получает клиентское приложение в виде объекта [user](/object-types/user.md) имеет следующи поля описывающие состояние авторизации в списке контактов текущего пользователя
```javascript
// ---
    , link_status: string ('requested'|'received'|'rejected'|'accepted'|'withdrawn')
    , link_status_read: boolean (true|false)
    , link_status_date: timestamp
// ---
```

`link_status` - состояние авторизации

Для всех состояний кроме `accepted` пользователи не могут писать друг другу.
У пользователя с таким статусом пустые следующие поля: `first_name`, `last_name`, `avatar`.
В любых упоминаниях о пользователе в интерфейсе вместо `first_name last_name` отображается `username`.

1. `accepted` - состояние, когда оба пользователя подтвердили авторизацию. Оба пользователя могут писать друг другу.
1. `withdrawn` - состояние, когда текущий пользователь, либо его собеседник разорвал авторизацию.
В окне с перепиской отображается уведомление об отмене авторизации.
<br /><img src=/blob/userlink2.png width=300  />
1. `received` - состояние, когда текущий пользователь получил запрос на авторизацию от другого пользователя.
В окне с перепиской отображается уведомление о запрошенной у текущего пользователя авторизации.
<br /><img src=/blob/userlink1.png width=300  />
1. `requested` - состояние, когда текущий пользователь запросил авторизацию у другого пользователя.
В окне с перепиской отображается уведомление о запросе авторизации текущим пользователем.
<br /><img src=/blob/userlink3.png width=300  />
1. `rejected` - состояние, когда собеседник отклонил запрос на авторизацию.
В окне с перепиской отображается уведомление
<br /><img src=/blob/userlink3.png width=300  />

#### Поиск пользователя

#### Изменение статуса авторизации

#### Обработка изменений статуса имеющихся контактов

#### Запрет/разрешение управления списком контактов
